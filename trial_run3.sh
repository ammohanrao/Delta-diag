#!/bin/bash

TOT_ROWS=$(wc -l < col_prox_def4.txt)
TOT_DATA=(","$TOT_ROWS"p")
sed -n 9$TOT_DATA col_prox_def4.txt >msql_tmp.txt

gawk -F'\t' '{printf("%s\t%s\t%s\t%s\t%s\t%s\n",$3,$7,$5,$8,$11,$2)}' msql_tmp.txt >msql_tmp1.txt
                                                                                                        
gawk -F'\t' '{printf("%s\t%s\n",NR,$0)}' msql_tmp1.txt >msql_tmp2.txt
cat header.txt msql_tmp2.txt >msql_tmp3.txt

python pairs_cnn1.py

#gawk -F'\t' '{printf("%s\n",$5)}' msql_tmp1.txt | sort -u >msql_tmp4.txt
#TOT_ROWS=$(wc -l <msql_tmp4.txt)

#echo "TOT_DIAG:$TOT_ROWS"

echo -en "\007"


#---------------------------KLDivergence------------------------------

#col_prox_def4 36% 134 0.009 2077

#---------------------------Poisson------------------------- 

#col_prox_def4 40% 134 0.3366 2077 *************
#+$10 56% 33 0.3362 2077 xxxxxxxxxxxxxxxxx
#+$16 56% 12 0.3357 860 xxxxxxxxxxxxxxxxxx
               #$3,$7,$5,$8,$4,$2 56%
               #$3,$7,$5,$8,$6,$2 54%
               #$3,$7,$5,$8,$9,$2 11%
               #$3,$7,$5,$8,$10,$2 NO
#col_prox_def4: $3,$7,$5,$8,$11,$2 77% 2077 *****************
               #$3,$7,$5,$8,$12,$2 25%
               #$3,$7,$5,$8,$13,$2 NO
               #$3,$7,$5,$8,$14,$2 29%
               #$3,$7,$5,$8,$15,$2 17%
               #$3,$7,$5,$8,$16,$2 25%
               #$3,$7,$5,$8,$17,$2 32%
               #$3,$7,$5,$8,$4,$6,$2 47%
               #$3,$7,$5,$8,$4,$11,$2 56%
               #$3,$7,$5,$8,$6,$11,$2 50%
#----------------------------------------------------------- 

#col_prox_def4
#all data : 35% accuracy 134

#$12 >=2 <=8 34% 132 706
#$12 >=4 <= 8 34 111 424
#$12 >=1 <= 8




#-----------------------------------------

#col_prox_def4_11GE0005_11LE04
#$18 >=0.01 <=0.4 34% 134 1053
#$17 >0.75 <=0.95 35% 134 2077
#$17 >0.85 <=1 35% 134 1623
#$17 >0.9 <=1 35% 134 1284
#$17 >0.95 <=1 35% 134 950
#$17 >0.96 <=1 35% 134 816
#$17 >0.97 <=1 35% 133 639
#$17 >0.98 <=1 34% 133 347
#$17 >0.9 <=0.96 34% 130 478
#$17 >0.85 <=0.96 35% 130 818
#$17 >0.85 <=0.97 34% 134 1002

#-----------------------------------------

#10 >=10 <=25 34% 127 318**********
#10 >=10 <=30 34% 127 380
#10 >=15 <=40 34% 124 435 
#10 >=10 <=40 34% 127 482
#-----------------re-run
#$11 >=0.005 <= 0.4 35% 134 1981 ******
#$11 >=0.05 <= 0.1 35% 134 1395
#$11 >=0.08 <= 0.09 35% 27
#$11 >=0.07 <= 0.09 34% 63
#$11 >=0.05 <= 0.15 34% 127
#$11 >=0.03 <= 0.15 34% 134 1002
#$11 >=0.03 <= 0.13 34% 134 851
#$11 >=0.03 <= 0.12 34% 134 773
#$11 >=0.03 <= 0.11 34% 134 709
#$11 >=0.03 <= 0.1 34% 134 662
#$11 >=0.03 <= 0.09 34% 134 601  *************
#$11 >=0.03 <= 0.08 34% 133 560
#$11 >=0.02 <= 0.08 34% 134 860
#-----------------re-run
#$14 >=2 $14<= 6 34% 130 603
#$14 >=2 $14<= 7 34% 130 687
#$14 >=2 $14<= 8 35% 132 739 **************
#$14 >=3 $14<= 8 34% 132 661
#$14 >=3 $14<= 9 34% 132 690
#$14 >=4 $14<= 7 35% 129 498
#-----------------re-run
#$9 >=0.01 <=0.03 34% 132 559 *****************
#$9 >=0.005 <=0.03 34% 132 706




#-----------------re-run
#$16 >=2 <=6 34% 125 437
#$16 >=1 <=6 34% 130 582
#$16 >=1 <=7 34% 132 601 *********************
#$16 >=1 <=8 34% 132 612


#----------end

#$16 >=2 <=8 35% 134 1395
#$16 >=2 <=6 35% 134 1395
#$16 >=2 <=5 35% 134 1395 
#$16 >=2 <=4 35% 134 1395 
#$16 >=4 <=6 35% 134 1395
#$16 >=4 <=5 35% 134 1395



#$9 >=0.01 <=0.04 34% 134 898
#$9 >=0.02 <=0.04 NO 
#$9 >=0.015 <=0.04 NO
#$9 >=0.01 <=0.045 34% 134 906
#$9 >=0.01 <=0.03 34% 871
#$9 >=0.01 <=0.02 34% 659
#$9 >=0.005 <=0.04 35% 1390 ********
#$9 >=0.005 <=0.042 34% 1395

#$14 >=2 $14<= 8 34% 134 1745
#$14 >=3 $14<= 8 35% 134 
#$14 >=3 $14<= 7 35% 134 1469
#$14 >=4 $14<= 6 35% 133 1010
#$14 >=4 $14<= 7 34% 133 1207
#$14 >=2 $14<= 7 35% 134 1622 *****

#col_prox_def4_11GE0005_11LE04
#$11 >=0.005 <= 0.4 35% 134 1981 ******
#$11 >=0.02 <= 0.4 35% 109 1716
#$11 >=0.01 <= 0.45 35% 124 1933
#$11 >=0.01 <= 0.4 35% 123 1919 ******
#$11 >=0.01 <= 0.26 35% 116
#$11 >=0.02 <= 0.25 35% 103
#$11 >=0.01 <= 0.25 35% 115
#$11 >=001 <= 0.2 35% 110
#$11 >=001 <= 0.12 34% 80
#$11 >=0.1 <= 0.12 35% 9
#$11 >=0.1 <= 0.15 34% 23

#-------------------------END---------------------------------
#sed -n 12$TOT_DATA kaggle_plot_corpus_11GE005_11LE012_14GE2_14LE6_9GE002_9LE008.txt >msql_tmp.txt
#TOT_ROWS=$(wc -l < kaggle_plot_corpus_11GE005_11LE012_14GE2_14LE6_9GE002_9LE008.txt) #_11G005_11L012

#CHECKED:$10,$11,$12,$13,$14,$15,$16
#USED:$3,$7,$5,$8,$2
#LEFT: $4,$6,$9

#$6 3 6 39% 40cases
#$6 3 5 34% 37cases


#$9	0.02 0.14	41%	 42 cases
#$9	0.02 0.13	41%	 42 cases
#$9	0.02 0.12	40%	 42 cases
#$9	0.02 0.1	40%	 42 cases
#$9	0.02 0.09	38%	 42 cases
#$9	0.02 0.08	43%	 42 cases *****
#$9	0.02 0.07	33%	 42 cases
#$9	0.02 0.07	34%	 36cases

#$16	0	2	40% 28 CASES
#$16	0	3	42% 38 CASES

#$14	3	6	42%	41 cases	
#$14	2	6	42%	42 cases
#$14	2	7	39%	

#$15	2	7	45%	14 CASES

#id	dcui	f_cui	duni_pos	d_count	diag 37%
#id	dcui	f_cui	duni_pos	d_count	aui_count	diag 33.5%
#id	dcui	duni_pos	d_count	diag 33%

#gawk -F'\t' '{printf("%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\n",NR,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16)}' 

#VAR	VAR1 ACCURACY	item diag_count
#20	25	36%	$10		
#18	25	37%	$10
#0.1	0.2	36%	$11
#0.05	0.1	38%	$11
#0.05	0.25	38.5%	$11
#0.08	0.1	34%	$11
#0.04	0.1	37%	$11
#0.05	0.12	41%	$11 42 ****
#0.05	0.13	37%	$11 42
#0.05	0.11	33%	$11 42

#0.05	0.18	$9

#7	13	$13	36%
#5	12	$13	38%
#3	12	$13	38%
#5	15	13	40%****** tot rows same

#$12	2	6 44% 32 cases
#12	3	7	33%
#12	3	10	33%
#12	2	10	36%
#12	2	9	37%











